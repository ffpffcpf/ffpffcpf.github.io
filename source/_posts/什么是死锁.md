---
title: 怎么又死锁啦
date: 2021-01-02 20:26:47
tags: 编程 知识沉淀 知识分享
---
相信很多小伙伴，听程序员喊过死锁啦，那么让他们抓耳挠腮的死锁是什么东西咧。  
首先什么是锁咧，锁的作用是保持一个东西的状态不受其他的东西影响。听到这个解释相信小伙伴肯定还是一脸懵逼......  
> 举个例子：  
>> 小胡在一家公司打杂，平时负责响应大佬的命令，完成分配的任务。一开始小胡很闲，只用完成老胡分配的工作，每天带薪拉屎美滋滋。随着公司业务扩展，大佬开始变多了，小胡也开始忙了起来。有一天大佬老陈让小胡去清点货物数量，当小胡清点到一半时，另一个大佬老赵也过来喊小胡去打印文件。这里我们有两个选择，要不记下当前的计数然后先去帮老赵打印文件，结束后回来接着清点；要不先清点完货物，然后去再去打印文件。这两种做法都可以，但是作为一个职场老鸟，无论你做那个选择有一件重要的事情你都需要做。那就是告诉老赵和老陈你现在在做谁安排的事，这样就不会因为没有提前说明，和两位领导发生冲突。  
>> 上面小胡就是一个要被保持的东西，就是要被锁的东西，对其他人声明自己在做谁安排的东西，就是一个声明锁的过程——小胡在干谁安排的活。其他人知道小胡在忙，也知道他在忙谁安排的活。而锁的作用就是保持小胡这个小资源专注于做一件事情，不会被其他人强行插入乱了套。  
  
  
那么什么是死锁咧，简单来说就是一个和两件事情有关的物体，两件事情相互等待对方完成才能完成。有点山路十八弯的感觉～～～～  
> 举个例子：  
>> 比如工作中有些不会画图的产品经理，需要等开发人员做出初稿才能确认产品方向，而开发人员又需要产品经理确认了应该做啥才能做出初稿。这我.....  
>> 上面这个情况就发生了死锁，初稿就是那个物体，它和两件事情有关——产品经理确认方向和开发人员制作，简单来说就是死循环。  
>> 程序中的死锁举个数据库相关的例子，例如把年龄10-40岁的用户头像图片地址更新，然后另一个任务把年龄30-60岁用户的操作系统时间重置为当前时间，数据库一条条记录更新是会锁定相应的记录，当两个任务同时操作时，30-40区间的记录会被两个任务同时操作，导致任务一等任务二做完才能拿到他处理中的记录，任务二也在等任务一。  